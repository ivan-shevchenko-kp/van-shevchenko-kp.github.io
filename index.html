<!DOCTYPE html>
<html>
<head>
	<title>My Page</title>
	<script>
		window.onbeforeunload = function() {
			document.getElementsByTagName('body')[0].style.backgroundColor = 'red';
			setTimeout(function () { // Timeout to wait for user response
				setTimeout(function () { // Timeout to wait onunload, if not fired then this will be executed
					document.getElementsByTagName('body')[0].style.backgroundColor = 'green';
			}, 50)}, 50);
			return true;
			// //alert('Hooray');
			// confirm('asdfwer');
			// document.getElementsByTagName('body')[0].style.backgroundColor = 'red';
			// sleep(10000);
		};
		
	</script>
</head>
<body>
	<h1>My Page</h1>
	<form>
		<p>
			<label for="name">Name:</label>
			<input type="text" id="name" name="name">
		</p>
		<p>
			<label for="email">Email:</label>
			<input type="email" id="email" name="email">
		</p>
		<p>
			<input type="submit" value="Save">
		</p>
	</form>
</body>
</html>